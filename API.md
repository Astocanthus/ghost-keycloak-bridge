<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

*   [query][1]
    *   [Parameters][2]
*   [fetchGhostSecret][3]
*   [isStaffEmpty][4]
*   [generateObjectId][5]
*   [generateUUID][6]
*   [generateMagicToken][7]
*   [signGhostCookie][8]
    *   [Parameters][9]
*   [generateGhostSessionId][10]
*   [signCookie][11]
    *   [Parameters][12]

## query

Executes a parameterized SQL query against the Ghost database.

### Parameters

*   `sql` **[string][13]** SQL statement with ? placeholders
*   `params` **[Array][14]** Values to bind to placeholders

Returns **[Promise][15]<[Array][14]>** Query results

## fetchGhostSecret

Retrieves the Ghost database hash used for internal signatures.

Returns **[Promise][15]<([string][13] | null)>** The db\_hash value or null if not found

## isStaffEmpty

Checks if the Ghost instance has any active staff users.
Used to detect fresh installations requiring setup.

Returns **[Promise][15]<[boolean][16]>** True if no active staff exists

## generateObjectId

Generates a 24-character hexadecimal ID for Ghost database records.
Mirrors MongoDB ObjectId format used by Ghost's data layer.

Returns **[string][13]** 24-char hex string

## generateUUID

Generates a RFC 4122 compliant UUID v4.
Used for member UUID fields and external references.

Returns **[string][13]** UUID string (e.g., "550e8400-e29b-41d4-a716-446655440000")

## generateMagicToken

Generates a URL-safe base64 token for magic link authentication.
Replaces +/= with URL-safe characters for query string compatibility.

Returns **[string][13]** 32-char URL-safe token

## signGhostCookie

Signs a session ID using Ghost's cookie signature format.
Produces cookies in the format: s:<sessionId>.<signature>

### Parameters

*   `sessionId` **[string][13]** The session identifier to sign
*   `secret` **[string][13]** The Ghost admin\_session\_secret

Returns **[string][13]** Signed cookie value prefixed with 's:'

## generateGhostSessionId

Generates a 32-character URL-safe session ID.

Returns **[string][13]** Base64 URL-safe session identifier

## signCookie

Signs a cookie value using Ghost's expected signature format.
Format: s:<value>.<base64-signature>

### Parameters

*   `val` **[string][13]** Value to sign
*   `secret` **[string][13]** Ghost admin\_session\_secret

Returns **[string][13]** Signed cookie string

[1]: #query

[2]: #parameters

[3]: #fetchghostsecret

[4]: #isstaffempty

[5]: #generateobjectid

[6]: #generateuuid

[7]: #generatemagictoken

[8]: #signghostcookie

[9]: #parameters-1

[10]: #generateghostsessionid

[11]: #signcookie

[12]: #parameters-2

[13]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[14]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[15]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise

[16]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean
